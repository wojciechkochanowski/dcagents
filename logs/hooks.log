2026-01-16 16:39:38 track-instructions-read: {"session_id":"2a52f551-fdc1-48ce-8cee-3fa6deec2f36","transcript_path":"/Users/bartek/.claude/projects/-Users-bartek-work-datacapt-dcagents/2a52f551-fdc1-48ce-8cee-3fa6deec2f36.jsonl","cwd":"/Users/bartek/work/datacapt/dcagents","permission_mode":"acceptEdits","hook_event_name":"PostToolUse","tool_name":"Read","tool_input":{"file_path":"/Users/bartek/work/datacapt/dcagents/.claude/commands/translate.md"},"tool_response":{"type":"text","file":{"filePath":"/Users/bartek/work/datacapt/dcagents/.claude/commands/translate.md","content":"---\ndescription: Translation validation and targeted fixes workflow.\n---\n\n## Translation Command (tr)\n\nExecute via sub-agent translation-manager\n\n**AUTOMATION**: Use `~/work/llm/language-check-tool/language-check-tool` for all analysis\n\n**CRITICAL**: Translation files are very long - use `edit` tool only for adding specific lines instead of reading entire files.\n**Strategy**: Use validation script for analysis, target specific issues identified in script output, use `edit` to add specific lines.\n\n**FORBIDDEN OPERATIONS**:\n\n- ❌ NEVER USE NODE/PY COMMANDS for translations\n- ❌ NEVER USE complex bash with `&&` `||` `for` operators\n- ❌ NEVER USE sed/awk/perl commands on JSON files\n- ❌ NEVER READ entire JSON files (4000+ keys each)\n- ❌ NEVER CREATE backup files (.bak, .bak2, etc.)\n\n**REQUIRED STRATEGY**: Fragmentary file handling\n\n- Use `grep` to find insertion points\n- Use `edit` tool ONLY for JSON modifications\n- Execute commands sequentially, never in combination\n\n### 1. Translation Analysis\n\n```bash\n~/work/llm/language-check-tool/language-check-tool\n```\n(just run it, there is no options)\nPerforms complete validation: JSON syntax, missing keys, json and formatting errors.\n\n### 2. Interpret Analysis Results\n\n#### a. If exit code 0 → \"All translations complete and valid\" → end\n\n#### b. If exit code 1 (warnings):\n\n- **Missing keys detected**: New keys in `en.json` need translation\n- **Empty values found**: Existing translations incomplete\n- Use detailed output to identify specific issues per language\n\n#### c. If exit code 2 (errors): JSON syntax issues must be fixed first\n\n#### d. After fixing errors, re-run:\n\n```bash\n~/work/llm/language-check-tool/language-check-tool                         # Show missing keys and errors\n```\n\nIf no issues found → end with \"translations are complete\"\nIf fixes needed → \"identified translation issues, proceeding with fixes\"\nIf new translations needed → proceed to step 3\n\n### 3. Add/Fix Translations in All Language Files\n\nFor each new `en.json` key:\n**French (`fr.json`)**: Add exact same English text\n**Other languages**: Add translated text:\n\n- `de.json` - German, `es.json` - Spanish, `it.json` - Italian, `ja.json` - Japanese, `pl.json` - Polish, `pt.json` - Portuguese, `zh.json` - Chinese\n\n### 4. Final Message\n\nDisplay brief English message only. One sentence, max 15 words.\n","numLines":69,"startLine":1,"totalLines":69}},"tool_use_id":"toolu_01T4eEP29Kpj98Tr2gdJzsrF"}
